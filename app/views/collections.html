<div class="container vCollections" ng-init="init()" ><div class="row">

<div class="col-md-2 sidebar">
	<h3>{{ selectedDB }}</h3>
	<span class="host hastip" tooltip="{{db.info.sysInfo}}" tooltip-placement="right" tooltip-append-to-body="1">{{db.hosts | noport}}</span>

	<br /><br />
	<table ng-hide="(databases && databases.length==0) || db.health!=0" class="table table-striped table-bordered table-hover table-condensed small">
		<tbody>
			<tr><th>User</th><td class="text-right">{{db.user}}</td></tr>
			<tr><th>ReplicaSet</th><td class="text-right">{{db.replicaSet}}</td></tr>
			<tr><th>SSL</th><td class="text-right">{{db.ssl}}</td></tr>
			<tr><th>Server Version</th><td class="text-right"><a href="http://docs.mongodb.org/manual/" target="_new" ng-bind-html="db.info.version | nullspin"></a></td></tr>
		</tbody>
	</table>

	<table ng-hide="(databases && databases.length==0) || db.health!=0" class="table table-striped table-bordered table-hover table-condensed small">
		<tbody>
			<tr><th>Objects</th><td class="text-right">{{db.stats.objects | number:0}}</td></tr>
			<tr><th>Indexes</th><td class="text-right">{{db.stats.indexes | number:0}}</td></tr>
			<tr><th><span class="hastip" tooltip="The average size of each document." tooltip-placement="right">AvgObjSize</span></th><td class="text-right" ng-bind-html="db.stats.avgObjSize | bytes:1"></td></tr>
			<tr><th><span class="hastip" tooltip="The total size of the data held in this database including the padding factor." tooltip-placement="right">DataSize</span></th><td class="text-right" ng-bind-html="db.stats.dataSize | bytes:1"></td></tr>
			<tr><th><span class="hastip" tooltip="The total amount of space allocated to collections in this database for document storage." tooltip-placement="right">StorageSize</span></th><td class="text-right" ng-bind-html="db.stats.storageSize | bytes:1"></td></tr>
			<tr><th><span class="hastip" tooltip="The total size of all indexes created on this database." tooltip-placement="right">IndexSize</span></th><td class="text-right" ng-bind-html="db.stats.indexSize | bytes:1"></td></tr>
			<tr><th><span class="hastip" tooltip="The total size of the data files that hold the database. This value includes preallocated space and the padding factor." tooltip-placement="right">FileSize</span></th><td class="text-right" ng-bind-html="db.stats.fileSize | bytes:1"></td></tr>
			<tr><th><span class="hastip" tooltip="If on, the profiler writes all the data it collects about slow queries to the system.profile collection." tooltip-placement="right" tooltip-append-to-body="1">Profile</span></th><td class="text-right" ng-bind-html="db.profile | profileLevel"></td></tr>
		</tbody>
	</table>

	<div ng-hide="(databases && databases.length==0) || db.health!=0">
	<b>Users</b>
	<table ng-hide="(databases && databases.length==0) || db.health!=0" class="table table-striped table-bordered table-hover table-condensed small">
		<thead>
			<tr><th>User</th><th>readOnly</th></tr>
		<thead>
		<tbody>
			<tr ng-repeat="user in users"><th>{{ user.user }}</th><td class="text-right">{{ user.readOnly }}</td></tr>
		</tbody>
	</table>
	</div>

</div>
<div class="col-md-10">
	<div class="panel panel-primary">
	<div class="panel-heading"><b>Collections</b></div>

	<table class="table table-striped greyth table-hover">
		<thead>
			<tr>
				<th>Collection <b class="caret"></b></th>
				<th class="text-right">Count</th>
				<th class="text-right">Size</th>
				<th class="text-right"><span class="hastip" tooltip="The average size of each document." tooltip-placement="bottom">AvgObjSize</span></th>
				<th class="text-right"><span class="hastip" tooltip="The total amount of space allocated to this collection for document storage." tooltip-placement="bottom">StorageSize</span></th>
				<th class="text-right">Indexes</th>
				<th class="text-right"><span class="hastip" tooltip="The total size of all indexes created on this collection." tooltip-placement="bottom">IndexSize</span></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-show="databases && databases.length==0"><td colspan="7"><i class='fa fa-exclamation-triangle'></i> No databases are configured in config.php.  Please look at php/config_template.php for an example config file. Make a copy of this and rename it config.php and then put your Mongo DB credentials inside.</td></tr>
			<tr ng-show="(collections==undefined || collections=={}) && database.length"><td colspan="7"><i class='fa fa-spinner fa-spin'></i> Loading...</td></tr>
			<tr ng-hide="db.health==0 || collections==undefined || collections=={}"><td colspan="7" ng-bind-html="db.health | healthDecode"></td></tr>
			<tr ng-repeat="c in collections" class="text-right">
				<td class="text-left"><a href="#/db/{{selectedDB}}/{{c.name}}">{{c.name}}</a></td>
				<td>{{c.stats.count | number:0}}</td>
				<td ng-bind-html="c.stats.size | bytes:1"></td>
				<td ng-bind-html="c.stats.avgObjSize | bytes:1:1"></td>
				<td ng-bind-html="c.stats.storageSize | bytes:1"></td>
				<td>{{c.stats.nindexes | number}}</td>
				<td ng-bind-html="c.stats.totalIndexSize | bytes:1"></td>
			</tr>
		</tbody>
	</table>
	<div class="panel-footer" ng-show="db.stats.collections!=undefined">{{collections.length | number:0}} Collections</div>
	</div>
</div>

</div></div>